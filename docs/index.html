<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Flame Division MusicAI ‚Äî ShadowSoundProtocol</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* ... all your styles unchanged ... */
    :root {
      --bg: #05070c;
      --bg-alt: #0b1018;
      --card: #101624;
      --accent: #f5b544;
      --accent-soft: rgba(245,181,68,0.16);
      --text: #f7f7ff;
      --text-soft: #b0b7c9;
      --danger: #ff3366;
    }
    /* (keep everything between here and audio{} exactly as you have it) */
    /* ... */
    audio {
      display: none;
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="badge">
      <span class="emoji">üî•</span>
      Flame Division ‚Ä¢ MusicAI Node
    </div>
    <h1>Flame-Division-MusicAI</h1>
    <p class="subtitle">
      Music Industry AI ‚Ä¢ <strong>ShadowSoundProtocol</strong>.  
      Certified governance brain with a holographic rap avatar ‚Äî bar-heavy,
      rights-locked, and coded in Flame Law.
    </p>

    <div class="layout">
      <!-- LEFT: AVATAR / VIDEO -->
      <section class="card">
        <div class="avatar-frame">
          <img
            src="assets/FlameLaw_Avatar_V1.png"
            alt="Flame Law Avatar V1 ‚Äî Holographic MC"
            onerror="document.getElementById('debug').textContent='Avatar failed to load from: assets/FlameLaw_Avatar_V1.png';"
          />
        </div>

        <div class="avatar-meta">
          <strong>Flame Law Avatar V1</strong><br />
          Generated from CAIO / CAIIP credential stack and Flame Law metadata.
          Designed as a holographic performance shell for MusicAI output.
          <div class="pill-row">
            <span class="pill">Demo-only playback</span>
            <span class="pill">Rights: Flame Division / Andrew W. Davis</span>
          </div>
        </div>

        <p class="node-tagline">
          This landing node is a proof-of-execution: GitHub-native,
          bar-driven, and ready to plug into vector DBs, Unreal, and multi-agent
          stacks when the rest of the system comes online.
        </p>
        <div id="debug"></div>
      </section>

      <!-- RIGHT: AUDIO NODES -->
      <section class="card">
        <h2>ShadowSoundProtocol ‚Ä¢ Audio Nodes</h2>
        <p class="node-tagline">
          Tap a node to let MusicAI spit. One cipher at a time ‚Äî the others stand down.
        </p>

        <div class="nodes">
          <article class="node">
            <div>
              <div class="node-title">FlameLaw Intro ‚Ä¢ Node-01</div>
              <div class="node-sub">Opening Protocol ¬∑ Mission Brief Cipher</div>
              <div class="node-bar">
                ‚ÄúFirst we etch the law in fire, then we teach the bots to listen‚Ä¶‚Äù
              </div>
            </div>
            <button class="btn" data-track="intro" type="button" data-state="stopped">
              ‚ñ∂ Play
            </button>
          </article>

          <article class="node">
            <div>
              <div class="node-title">Holo Chambers Freestyle ‚Ä¢ Node-02</div>
              <div class="node-sub">Training Sim ¬∑ Holographic War Room</div>
              <div class="node-bar">
                ‚ÄúEvery bar a data packet, every cadence is a key‚Ä¶‚Äù
              </div>
            </div>
            <button class="btn" data-track="holo" type="button" data-state="stopped">
              ‚ñ∂ Play
            </button>
          </article>

          <article class="node">
            <div>
              <div class="node-title">Shadow Docket Cipher ‚Ä¢ Node-03</div>
              <div class="node-sub">Sealed Motion ¬∑ After-Hours Tribunal</div>
              <div class="node-bar">
                ‚ÄúI keep a shadow docket where the verdicts never tweet‚Ä¶‚Äù
              </div>
            </div>
            <button class="btn" data-track="shadow" type="button" data-state="stopped">
              ‚ñ∂ Play
            </button>
          </article>
        </div>
      </section>
    </div>

    <footer class="footer">
      Flame Division MusicAI runs under internal <strong>Flame Law ‚Ä¢ ShadowSoundProtocol</strong>.<br>
      Public playback here is demo-only.<br>
      Repo:
      <a href="https://github.com/Andrew-Davis-Ai-portfolio/Flame-Division-MusicAI" target="_blank">
        Flame-Division-MusicAI
      </a>
    </footer>
  </div>

  <audio id="track-intro"  src="assets/flamelaw_intro.mp3"></audio>
  <audio id="track-holo"   src="assets/holo_chambers_freestyle.mp3"></audio>
  <audio id="track-shadow" src="assets/shadow_docket_cipher.mp3"></audio>

  <script>
    (function () {
      const debug = document.getElementById("debug");
      const buttons = Array.from(document.querySelectorAll(".btn[data-track]"));
      const tracks = {
        intro:  document.getElementById("track-intro"),
        holo:   document.getElementById("track-holo"),
        shadow: document.getElementById("track-shadow"),
      };

      Object.entries(tracks).forEach(([key, audio]) => {
        if (!audio) return;
        audio.addEventListener("error", () => {
          if (debug) {
            debug.textContent = "Audio failed to load for '" + key +
              "' at: " + audio.getAttribute("src");
          }
        });
      });

      let currentKey = null;
      let currentButton = null;

      function log(msg) {
        if (debug) debug.textContent = msg;
      }

      function resetButton(btn) {
        if (!btn) return;
        btn.dataset.state = "stopped";
        btn.textContent = "‚ñ∂ Play";
      }

      function stopAll() {
        Object.values(tracks).forEach(audio => {
          if (!audio) return;
          audio.pause();
          audio.currentTime = 0;
        });
        buttons.forEach(resetButton);
        currentKey = null;
        currentButton = null;
      }

      function playTrack(key, button) {
        const audio = tracks[key];
        if (!audio) {
          log("No audio element mapped for key: " + key);
          return;
        }

        if (currentKey === key && !audio.paused) {
          stopAll();
          log("Stopped: " + key);
          return;
        }

        stopAll();

        audio.play().then(() => {
          button.dataset.state = "playing";
          button.textContent = "‚è∏ Pause";
          currentKey = key;
          currentButton = button;
          log("Playing: " + key);
        }).catch(err => {
          log("Playback error for " + key + ": " + err.message);
          resetButton(button);
        });

        audio.onended = function () {
          if (currentKey === key) {
            resetButton(button);
            currentKey = null;
            currentButton = null;
            log("Finished: " + key);
          }
        };
      }

      buttons.forEach(btn => {
        btn.addEventListener("click", () => {
          const key = btn.dataset.track;
          playTrack(key, btn);
        });
      });
    })();
  </script>
</body>
</html>
